version: '3.8'
services:
  skinny:
    entrypoint:
    - sleep
    - infinity
    image: kindtek/d2w:ubuntu-skinny
    build:
      context: .
      target: d2w_skinny
      args: 
      - username=${username:-dev0}
      dockerfile: dockerfile.ubuntu.yaml
    init: true
    volumes:
    - type: bind
      source: /var/run/docker.sock
      target: /var/run/docker.sock
    - type: bind
      source: ~/
      target: /home/devel

  phat:
    entrypoint:
    - sleep
    - infinity
    image: kindtek/d2w:ubuntu-phat
    build:
      context: .
      target: d2w_phat
      args: 
      - username=${username:-dev0}
      dockerfile: dockerfile.ubuntu.yaml
    init: true
    volumes:
    - type: bind
      source: /var/run/docker.sock
      target: /var/run/docker.sock
    - type: bind
      source: ~/
      target: /home/devel
  
  phatt:
    entrypoint:
    - sleep
    - infinity
    image: kindtek/d2w:ubuntu-phatt
    build:
      context: .
      target: d2w_phatt
      args: 
      - username=${username:-dev0}
      dockerfile: dockerfile.ubuntu.yaml
    init: true
    volumes:
    - type: bind
      source: /var/run/docker.sock
      target: /var/run/docker.sock
    - type: bind
      source: ~/
      target: /home/devel

